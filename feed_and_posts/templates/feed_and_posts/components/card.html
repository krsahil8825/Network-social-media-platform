{% for eachpost in allposts %}

<div class="card bg-secondary text-light border-0 shadow-sm rounded-3 w-100 mx-auto mb-4">
    <div class="card-body p-3">

        <div class="d-flex justify-content-between align-items-center mb-2">
            <div class="d-flex align-items-center">
                <a href="{% url 'user_profile' eachpost.user.username %}" class="mb-0 fw-semibold fs-6 text-white text-decoration-none">@{{ eachpost.user.username }}</a>
            </div>
            <small class="text-light-50 small">{{ eachpost.created_at|date:"M d, Y" }}</small>
        </div>

        <h6 class="card-title text-light fw-bold mb-2">{{ eachpost.title }}</h6>

        <p class="card-text text-light-75 small mb-3">
            {{ eachpost.content }}
        </p>

        <div class="d-flex justify-content-between align-items-center">
            <div>
                <form action="{% url 'like_post' eachpost.slug %}" method="POST" class="like-form d-inline">
                    <input type="hidden" name="slug" value="{{ eachpost.slug }}">
                    <button class="btn btn-outline-light btn-sm me-2 py-0 px-2" type="submit">
                        <i class="{% if request.user in eachpost.likes.all %}bi bi-heart-fill text-danger{% else %}bi bi-heart{% endif %}"></i>
                    </button>
                </form>
                <button class="btn btn-outline-light btn-sm py-0 px-2">
                    <i class="bi bi-chat"></i>
                </button>
            </div>

            {% if request.user == eachpost.user %}
            <div>
                <button class="btn btn-outline-warning btn-sm me-2 py-0 px-2">
                    <i class="bi bi-pencil"></i>
                </button>
                <button class="btn btn-outline-danger btn-sm py-0 px-2">
                    <i class="bi bi-trash"></i>
                </button>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% empty %}
<p class="text-light-50">Sorry! No posts available.</p>
{% endfor %}

